{% extends 'base.html' %}

{% load static %}
{% load crispy_forms_filters %}

{% block content %}
    <form id="sign-up-form" method="post">
        {% csrf_token %}
        <h5>Dados pessoais</h5>
        <div>
            <div class="form-row">
                <div class="form-group col mb-0">{{ form.cpf|as_crispy_field }}</div>
            </div>
            <div class="form-row">
                <div class="form-group col mb-0">{{ form.password|as_crispy_field }}</div>
            </div>
            <div class="form-row">
                <div class="form-group col mb-0">{{ form.full_name|as_crispy_field }}</div>
            </div>
            <div class="form-row">
                <div class="form-group col mb-0">{{ form.mother_name|as_crispy_field }}</div>
            </div>
            <div class="form-row">
                <div class="form-group col-6 mb-0">{{ form.birth_date|as_crispy_field }}</div>
                <div class="form-group col-6 mb-0">{{ form.gender|as_crispy_field }}</div>
            </div>
            <div class="form-row">
                <div class="form-group col-6 mb-0">{{ form.sus_number|as_crispy_field }}</div>
                <div class="form-group col-6 mb-0">{{ form.phone_number|as_crispy_field }}</div>
            </div>
        </div>

        <h5>Endereço</h5>
        {{ address_formset.management_form }}
        {% with address_form=address_formset.forms.0 %}
            <div class="individual-form">
                <div>
                    <h6>Endereço 1</h6>
                    {{ address_form.profile }}
                    <div class="form-row">
                        <div class="form-group col-6 mb-0">{{ address_form.type|as_crispy_field }}</div>
                        <div class="form-group col-6 mb-0">{{ address_form.postal_code|as_crispy_field }}</div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-8 mb-0">{{ address_form.street_name|as_crispy_field }}</div>
                        <div class="form-group col-4 mb-0">{{ address_form.number|as_crispy_field }}</div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-12 mb-0">{{ address_form.complement|as_crispy_field }}</div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-4 mb-0">{{ address_form.neighbourhood|as_crispy_field }}</div>
                        <div class="form-group col-4 mb-0">{{ address_form.city|as_crispy_field }}</div>
                        <div class="form-group col-4 mb-0">{{ address_form.people|as_crispy_field }}</div>
                    </div>
                </div>
            </div>
        {% endwith %}
        <div class="form-row justify-content-end">
            <div class="form-group"><input type="submit" class="btn btn-primary" value="Cadastrar"></div>
        </div>
    </form>

    <script src="{% static 'dynamic_formsets/jquery.formset.js' %}" type="text/javascript"></script>

    <script>
        $(".individual-form").formset({
            prefix: "{{ address_formset.prefix }}",
            uiText: {
                addPrompt: "Adicionar outro endereço",
                removePrompt: "Remover"
            }
        });
    </script>
{% endblock %}